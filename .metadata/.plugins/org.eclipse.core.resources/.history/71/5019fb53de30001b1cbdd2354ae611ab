package br.com.alura.jpa.testes;

import java.math.BigDecimal;
import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;

import br.com.alura.jpa.modelo.Categoria;
import br.com.alura.jpa.modelo.Conta;
import br.com.alura.jpa.modelo.Movimentacao;
import br.com.alura.jpa.modelo.TipoMovimentacao;

public class TestaMovimentacao {
	public static void main(String[] args) {
		EntityManagerFactory emf = Persistence.createEntityManagerFactory("alura");
		EntityManager em = emf.createEntityManager();
		
		Conta c = new Conta();		
		c.setAgencia(123);
		c.setNumero(456);
		c.setSaldo(250.0);
		c.setTitular("Iratuan Junior");		
		em.persist(c);
		
		Categoria cat = new Categoria("Alimentacao");
		List<Categoria> cateogorias = new ArrayList<Categoria>();
		cateogorias.add(cat);
		em.persist(cat);
		
		

		Movimentacao m = new Movimentacao();
		m.setConta(c);
		m.setCategorias(cateogorias);
		m.setData(LocalDateTime.now());
		m.setDescricao("Teste");
		m.setValor(BigDecimal.valueOf(100.0));
		m.setTipoMovimentacao(TipoMovimentacao.ENTRADA);
		
		em.persist(m);
		
//		
//
//		Movimentacao movimentacao = em.find(Movimentacao.class, 1L);
//		Conta conta = movimentacao.getConta();
//
//		System.out.println(conta.getTitular());
	}
}
